<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Video to Transcription v2.0</title>
    <link rel="stylesheet" href="/static/style.css" />
    <link rel="icon" href="/static/favicon.ico" type="image/x-icon" />
  </head>
  <body>
    <div class="header">
      <h1>Video to Transcription Service v2.0</h1>
      <div id="system-info">
        <span id="hardware-info">Loading system info...</span>
      </div>
    </div>

    <div class="upload-section">
      <h2>Upload & Process</h2>

      <div class="form-group">
        <label for="file-input">Select File:</label>
        <div class="file-input-container">
          <input
            type="file"
            id="file-input"
            accept=".mp4, .avi, .mkv, .mov, .wmv, .flv, .webm, .mpeg, .mpg, .3gp, .mp3, .wav, .ogg, .m4a, .aac"
            style="display: none"
          />
          <button
            type="button"
            class="file-select-btn"
            onclick="document.getElementById('file-input').click()"
          >
            Choose File
          </button>
          <span id="selected-file-name" class="selected-file-name"
            >No file selected</span
          >
        </div>
      </div>

      <div class="form-group">
        <label for="model-select">Transcription Model:</label>
        <select id="model-select">
          <option value="">Loading models...</option>
        </select>
        <div id="model-info" class="info-text"></div>
      </div>

      <div class="form-group">
        <label for="prompt-input">AI Processing Prompt (Optional):</label>
        <div class="prompt-container">
          <div class="prompt-suggestions">
            <select id="prompt-suggestions" style="display: none">
              <option value="">Select a suggested prompt...</option>
            </select>
            <button
              type="button"
              id="show-suggestions-btn"
              style="display: none"
            >
              üìù Use Suggested Prompt
            </button>
          </div>
          <textarea
            id="prompt-input"
            placeholder="Enter your AI processing prompt here (optional). Leave empty to skip AI processing."
            rows="4"
          ></textarea>
          <div class="prompt-info">
            <small
              >üí° Leave empty to transcribe only. Add a prompt to enable AI
              processing.</small
            >
          </div>
        </div>
      </div>

      <button id="upload-button" disabled>Upload & Process</button>

      <!-- Real-time Progress Section (moved here from bottom) -->
      <div id="progress-container" style="display: none">
        <h3>Processing Status</h3>
        <div id="message"></div>
      </div>

      <div id="status" style="display: none" aria-live="polite">
        <span class="spinner" aria-hidden="true"></span>
        <span>Processing...</span>
      </div>

      <div id="upload-progress-container" style="display: none">
        <progress id="upload-progress-bar" value="0" max="100"></progress>
        <div id="upload-progress-message"></div>
      </div>

      <div id="error-message" style="display: none" aria-live="assertive"></div>
    </div>

    <div id="files-container">
      <div id="transcription-links">
        <h2>Transcription Files</h2>
        <div id="transcriptions"></div>
      </div>

      <div id="ai-response-links">
        <h2>AI Response Files</h2>
        <div id="ai-responses"></div>
      </div>
    </div>

    <div class="model-management">
      <h2>Model Management</h2>

      <div class="tabs">
        <button
          class="tab-button active"
          onclick="openTab(event, 'installed-models')"
        >
          Installed Models
        </button>
        <button class="tab-button" onclick="openTab(event, 'available-models')">
          Download Models
        </button>
      </div>

      <div id="installed-models" class="tab-content active">
        <div id="installed-models-list">
          <p>Loading installed models...</p>
        </div>
      </div>

      <div id="available-models" class="tab-content">
        <div id="compatible-models-list">
          <p>Loading compatible models...</p>
        </div>
      </div>
    </div>

    <script src="/static/script.js"></script>
  </body>
</html>
